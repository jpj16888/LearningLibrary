
--1.查询碎片程度高的表

SELECT TABLE_NAME,(BLOCKS*8192/1024/1024)"理论大小 M",(NUM_ROWS*AVG_ROW_LEN/1024/1024/0.9)"实际大小 M",round((NUM_ROWS*AVG_ROW_LEN/1024/1024/0.9)/(BLOCKS*8192/1024/1024),3)*100||'%'
"实际使用率%"FROM USER_TABLES where blocks>100 and
(NUM_ROWS*AVG_ROW_LEN/1024/1024/0.9)/(BLOCKS*8192/1024/1024)<0.3 order by (NUM_ROWS*AVG_ROW_LEN/1024/1024/0.9)/(BLOCKS*8192/1024/1024) desc

